import{k as s,o as N,b as j,x as l,m as o,p as e,V as O,q as a,P as J,y as c,ba as Q,z,ag as B,a2 as G,Q as E,w as H,c as I,F as K,a as W,G as U,C as X,D as Y}from"./index.f5778ade.js";import{r as b,e as Z}from"./validators.d71d6c94.js";import{V as ee}from"./VSpacer.84b26ffe.js";import{V as S}from"./VBtn.1b313c05.js";import{a as T}from"./VCard.811866d9.js";import{V as k}from"./VCardText.21459e26.js";import{V as te}from"./VForm.ac9a6e7e.js";import{V as q}from"./VRow.6bece164.js";import{V}from"./VCol.55ec6a95.js";import{d as w}from"./VTextField.04d3c35c.js";import{V as le}from"./VNavigationDrawer.f922ecf3.js";import{a as $}from"./axios.80581068.js";import{e as A}from"./environments.3b606d6b.js";import"./formatters.b7bd9e2f.js";import{V as ae}from"./VSelect.c89c08d3.js";import{V as L}from"./VDivider.6c421e0c.js";import{V as oe}from"./VTable.ee2562d5.js";import{V as re}from"./VMenu.4f1471ed.js";import{V as se,a as M}from"./VList.6b5daae5.js";import{V as ne}from"./VPagination.fc3c8010.js";import"./index.0d4b9ec4.js";import"./createSimpleFunctional.f5669897.js";import"./group.e7225ded.js";import"./router.aceff5aa.js";import"./position.1e434685.js";import"./location.c31d3587.js";import"./VAvatar.96e9befc.js";import"./VImg.337ce076.js";import"./form.a8b2966d.js";import"./forwardRefs.c003b6b8.js";/* empty css              */import"./index.6e84413a.js";import"./easing.36b781ab.js";import"./ssrBoot.f1fcb362.js";import"./reportStore.4330710e.js";import"./dialog-transition.4a40a600.js";import"./VCheckboxBtn.b9d06dc9.js";import"./VSelectionControl.fb242e40.js";import"./VChip.bca106a5.js";import"./scopeId.af0aa75f.js";import"./lazy.dd5f2a7f.js";const ie={class:"d-flex align-center pa-6 pb-1"},ue=o("h6",{class:"text-h6"}," Nueva Empresa ",-1),de={__name:"AddNewReporte",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(_,{emit:m}){const h=_,u=s(!1),x=s(),R=s(""),p=s(""),i=s(""),f=s(""),y=s(""),v=s(""),D=s(""),g=s(""),P=()=>{m("update:isDrawerOpen",!1),B(()=>{var n,t;(n=x.value)==null||n.reset(),(t=x.value)==null||t.resetValidation()})},C=()=>{var n;(n=x.value)==null||n.validate().then(({valid:t})=>{t&&(m("userData",{id:p.value,nombre:R.value,ruc:p.value,email:i.value,gerente:f.value,direccion:y.value,telefono:v.value,ciudad:D.value,provincia:g.value,origen:"txtsupercias",userId:JSON.parse(sessionStorage.getItem("userData")).id,activo:1}),m("update:isDrawerOpen",!1),B(()=>{var r,F;(r=x.value)==null||r.reset(),(F=x.value)==null||F.resetValidation()}))})},d=n=>{m("update:isDrawerOpen",n)};return(n,t)=>(N(),j(le,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":h.isDrawerOpen,"onUpdate:modelValue":d},{default:l(()=>[o("div",ie,[ue,e(ee),e(S,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:P},{default:l(()=>[e(O,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(J),{options:{wheelPropagation:!1}},{default:l(()=>[e(T,{flat:""},{default:l(()=>[e(k,null,{default:l(()=>[e(te,{ref_key:"refForm",ref:x,modelValue:a(u),"onUpdate:modelValue":t[8]||(t[8]=r=>c(u)?u.value=r:null),onSubmit:Q(C,["prevent"])},{default:l(()=>[e(q,null,{default:l(()=>[e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(R),"onUpdate:modelValue":t[0]||(t[0]=r=>c(R)?R.value=r:null),rules:[a(b)],label:"Nombre"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(i),"onUpdate:modelValue":t[1]||(t[1]=r=>c(i)?i.value=r:null),rules:[a(b),a(Z)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(p),"onUpdate:modelValue":t[2]||(t[2]=r=>c(p)?p.value=r:null),rules:[a(b)],label:"ruc"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(f),"onUpdate:modelValue":t[3]||(t[3]=r=>c(f)?f.value=r:null),rules:[a(b)],label:"gerente"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(y),"onUpdate:modelValue":t[4]||(t[4]=r=>c(y)?y.value=r:null),type:"text",rules:[a(b)],label:"direccion"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(v),"onUpdate:modelValue":t[5]||(t[5]=r=>c(v)?v.value=r:null),type:"text",rules:[a(b)],label:"telefono"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(D),"onUpdate:modelValue":t[6]||(t[6]=r=>c(D)?D.value=r:null),type:"text",rules:[a(b)],label:"ciudad"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(w,{modelValue:a(g),"onUpdate:modelValue":t[7]||(t[7]=r=>c(g)?g.value=r:null),type:"text",rules:[a(b)],label:"provincia"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(S,{type:"submit",class:"me-3"},{default:l(()=>[z(" Crear Empresa ")]),_:1}),e(S,{type:"reset",variant:"tonal",color:"secondary",onClick:P},{default:l(()=>[z(" Cancelar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},pe=G("SriListStore",{actions:{fetchReportesSri(_){return $.get(`${A.apiUrl}/srifc/byuser`,{params:_})},addReporteSri(_){return console.log(_),new Promise((m,h)=>{$.post(`${A.apiUrl}/srifc`,{periodo:_}).then(u=>{console.log(u),m(u)}).catch(u=>h(u))})},fetchReporte(_){return new Promise((m,h)=>{$.get(`/apps/users/${_}`).then(u=>m(u)).catch(u=>h(u))})}}});const ce={class:"me-3",style:{width:"80px"}},me={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},fe=o("thead",null,[o("tr",null,[o("th",{scope:"col"}," EMPRESA "),o("th",{scope:"col"}," PERIODO "),o("th",{scope:"col"}," NOMBRE "),o("th",{scope:"col"}," FECHA "),o("th",{scope:"col"}," ACCIONES ")])],-1),ve={class:"text-capitalize text-base"},Ve={class:"text-capitalize text-base font-weight-semibold"},_e={class:"text-base"},xe={class:"text-center",style:{width:"5rem"}},ge=o("tr",null,[o("td",{colspan:"7",class:"text-center"}," No existen reportes creados ")],-1),be=[ge],we={class:"text-sm text-disabled"},ut={__name:"index",setup(_){const m=pe(),h=s(""),u=s(),x=s(),R=s(),p=s(10),i=s(1),f=s(1),y=s(0),v=s([]),D=()=>{m.fetchReportesSri({q:h.value,status:R.value,plan:x.value,role:u.value,perPage:p.value,currentPage:i.value,user:JSON.parse(sessionStorage.getItem("userData")).id,origen:"txtsupercias"}).then(d=>{console.log(d),v.value=d.data.reportes,f.value=d.data.totalPage,y.value=d.data.totalReporteSri}).catch(d=>{console.error(d)})};E(D),E(()=>{i.value>f.value&&(i.value=f.value)});const g=s(!1);E(()=>{i.value>f.value&&(i.value=f.value)});const P=H(()=>{const d=v.value.length?(i.value-1)*p.value+1:0,n=v.value.length+(i.value-1)*p.value;return`Mostrando ${d} a ${n} de ${y.value} registros`}),C=d=>{m.addReporteSri(d),D()};return(d,n)=>(N(),I("section",null,[e(q,null,{default:l(()=>[e(V,{cols:"12"},{default:l(()=>[e(T,{title:"Reportes SRI"},{default:l(()=>[e(k,{class:"d-flex flex-wrap py-4 gap-4"},{default:l(()=>[o("div",ce,[e(ae,{modelValue:a(p),"onUpdate:modelValue":n[0]||(n[0]=t=>c(p)?p.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),o("div",me,[e(S,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:l(()=>[z(" Exportar ")]),_:1}),e(S,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"}},{default:l(()=>[z(" Reporte F-101 ")]),_:1})])]),_:1}),e(L),e(oe,{class:"text-no-wrap"},{default:l(()=>[fe,o("tbody",null,[(N(!0),I(K,null,W(a(v),t=>(N(),I("tr",{key:t.id,style:{height:"3.75rem"}},[o("td",null,[o("span",ve,U(t.empresareportesri.nombre),1)]),o("td",null,[o("span",Ve,U(t.periodosreportesri.periodo),1)]),o("td",null,[o("span",_e,U(t.nombre_reporte),1)]),o("td",null,U(t.createdAt),1),o("td",xe,[e(S,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e(O,{size:"22",icon:"tabler-edit"})]),_:1}),e(S,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e(O,{size:"22",icon:"tabler-trash"})]),_:1}),e(S,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e(O,{size:"22",icon:"tabler-dots-vertical"}),e(re,{activator:"parent"},{default:l(()=>[e(se,null,{default:l(()=>[e(M,{title:"View",to:{name:"apps-user-view-id",params:{id:d.empresa.id}}},null,8,["to"]),e(M,{title:"Suspend",href:"javascript:void(0)"})]),_:1})]),_:1})]),_:1})])]))),128))]),X(o("tfoot",null,be,512),[[Y,!a(v).length]])]),_:1}),e(L),e(k,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:l(()=>[o("span",we,U(a(P)),1),e(ne,{modelValue:a(i),"onUpdate:modelValue":n[1]||(n[1]=t=>c(i)?i.value=t:null),size:"small","total-visible":5,length:a(f)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(de,{isDrawerOpen:a(g),"onUpdate:isDrawerOpen":n[2]||(n[2]=t=>c(g)?g.value=t:null),onUserData:C},null,8,["isDrawerOpen"])]))}};export{ut as default};
