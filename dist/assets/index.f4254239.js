import{k as c,Q as D,w as R,r as F,q as r,o as _,b as z,x as l,p as t,m as e,y as x,z as m,V as d,c as g,F as O,a as q,G as n,O as k,C as Q,D as G,I as M}from"./index.f5778ade.js";import{u as j}from"./useInvoiceStore.ae4d6e10.js";import{I as H}from"./formatters.b7bd9e2f.js";import{V as C}from"./VCardText.21459e26.js";import{V as T}from"./VSelect.c89c08d3.js";import{V}from"./VBtn.1b313c05.js";import{V as L}from"./VSpacer.84b26ffe.js";import{d as J}from"./VTextField.04d3c35c.js";import{V as N}from"./VDivider.6c421e0c.js";import{V as K}from"./VTable.ee2562d5.js";import{V as W}from"./VTooltip.29782c5e.js";import{V as B}from"./VAvatar.96e9befc.js";import{V as X}from"./VImg.337ce076.js";import{V as Y}from"./VChip.bca106a5.js";import{V as Z}from"./VMenu.4f1471ed.js";import{V as tt,a as w,b as y}from"./VList.6b5daae5.js";import{V as et}from"./VPagination.fc3c8010.js";import{a as at}from"./VCard.811866d9.js";import"./axios.80581068.js";import"./index.0d4b9ec4.js";import"./reportStore.4330710e.js";import"./createSimpleFunctional.f5669897.js";import"./forwardRefs.c003b6b8.js";import"./dialog-transition.4a40a600.js";import"./easing.36b781ab.js";import"./VCheckboxBtn.b9d06dc9.js";import"./VSelectionControl.fb242e40.js";import"./router.aceff5aa.js";import"./group.e7225ded.js";import"./position.1e434685.js";import"./location.c31d3587.js";import"./index.6e84413a.js";import"./form.a8b2966d.js";import"./scopeId.af0aa75f.js";import"./lazy.dd5f2a7f.js";const lt={class:"d-flex align-center",style:{width:"135px"}},ot=e("span",{class:"text-no-wrap me-3"},"Show:",-1),st={class:"me-3"},nt={class:"d-flex align-center flex-wrap gap-4"},rt={class:"invoice-list-filter"},it={class:"invoice-list-filter"},ct={class:"text-uppercase"},dt=e("th",{scope:"col"}," #ID ",-1),ut={scope:"col",class:"text-center"},pt=e("th",{scope:"col"}," CLIENT ",-1),mt=e("th",{scope:"col",class:"text-center"}," TOTAL ",-1),_t=e("th",{scope:"col"}," Issued Date ",-1),ft=e("th",{scope:"col",class:"text-center"}," BALANCE ",-1),vt=e("th",{scope:"col"}," ACTIONS ",-1),ht={class:"text-center"},xt={class:"mb-0"},Vt={class:"mb-0"},bt={class:"mb-0"},gt={class:"d-flex align-center"},wt={key:1},yt={class:"d-flex flex-column"},It={class:"text-base font-weight-medium mb-0"},St={class:"text-disabled text-sm"},Pt={class:"text-center"},Dt={class:"text-center"},zt={style:{width:"8rem"}},kt=e("tr",null,[e("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Ct=[kt],Tt={class:"text-sm text-disabled"},_e={__name:"index",setup(Lt){const A=j(),f=c(""),v=c(),u=c(10),i=c(1),h=c(1),I=c(0),p=c([]),S=c([]);D(()=>{A.fetchInvoices({q:f.value,status:v.value,perPage:u.value,currentPage:i.value}).then(o=>{p.value=o.data.invoices,h.value=o.data.totalPage,I.value=o.data.totalInvoices}).catch(o=>{console.log(o)})}),D(()=>{i.value>h.value&&(i.value=h.value)});const E=R(()=>{const o=p.value.length?(i.value-1)*u.value+1:0,s=p.value.length+(i.value-1)*u.value;return`Showing ${o} to ${s} of ${I.value} entries`}),P=(o,s)=>o===s?{status:"Unpaid",chip:{color:"error"}}:o===0?{status:"Paid",chip:{color:"success"}}:{status:o,chip:{variant:"text"}},b=o=>o==="Partial Payment"?{variant:"success",icon:"tabler-circle-half-2"}:o==="Paid"?{variant:"warning",icon:"tabler-chart-pie"}:o==="Downloaded"?{variant:"info",icon:"tabler-arrow-down-circle"}:o==="Draft"?{variant:"primary",icon:"tabler-device-floppy"}:o==="Sent"?{variant:"secondary",icon:"tabler-circle-check"}:o==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"};return(o,s)=>{const $=F("RouterLink");return r(p)?(_(),z(at,{key:0,id:"invoice-list"},{default:l(()=>[t(C,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[e("div",lt,[ot,t(T,{modelValue:r(u),"onUpdate:modelValue":s[0]||(s[0]=a=>x(u)?u.value=a:null),density:"compact",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",st,[t(V,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"}},{default:l(()=>[m(" Create invoice ")]),_:1})]),t(L),e("div",nt,[e("div",rt,[t(J,{modelValue:r(f),"onUpdate:modelValue":s[1]||(s[1]=a=>x(f)?f.value=a:null),placeholder:"Search Invoice",density:"compact"},null,8,["modelValue"])]),e("div",it,[t(T,{modelValue:r(v),"onUpdate:modelValue":s[2]||(s[2]=a=>x(v)?v.value=a:null),label:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),t(N),t(K,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[e("thead",ct,[e("tr",null,[dt,e("th",ut,[t(d,{icon:"tabler-trending-up"})]),pt,mt,_t,ft,vt])]),e("tbody",null,[(_(!0),g(O,null,q(r(p),a=>(_(),g("tr",{key:a.id,style:{height:"3.75rem"}},[e("td",null,[t($,{to:{name:"apps-invoice-preview-id",params:{id:a.id}}},{default:l(()=>[m(" #"+n(a.id),1)]),_:2},1032,["to"])]),e("td",ht,[t(W,null,{activator:l(({props:U})=>[t(B,k({size:30},U,{color:b(a.invoiceStatus).variant,variant:"tonal"}),{default:l(()=>[t(d,{size:20,icon:b(a.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[e("p",xt,n(a.invoiceStatus),1),e("p",Vt," Balance: "+n(a.balance),1),e("p",bt," Due date: "+n(a.dueDate),1)]),_:2},1024)]),e("td",null,[e("div",gt,[t(B,{size:"34",color:b(a.invoiceStatus).variant,variant:"tonal",class:"me-3"},{default:l(()=>[a.avatar.length?(_(),z(X,{key:0,src:a.avatar},null,8,["src"])):(_(),g("span",wt,n(r(H)(a.client.name)),1))]),_:2},1032,["color"]),e("div",yt,[e("h6",It,n(a.client.name),1),e("span",St,n(a.client.companyEmail),1)])])]),e("td",Pt," $"+n(a.total),1),e("td",null,n(a.issuedDate),1),e("td",Dt,[t(Y,k({label:""},P(a.balance,a.total).chip,{size:"small"}),{default:l(()=>[m(n(P(a.balance,a.total).status),1)]),_:2},1040)]),e("td",zt,[t(V,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[t(d,{icon:"tabler-mail",size:22})]),_:1}),t(V,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-invoice-preview-id",params:{id:a.id}}},{default:l(()=>[t(d,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),t(V,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[t(d,{size:22,icon:"tabler-dots-vertical"}),t(Z,{activator:"parent"},{default:l(()=>[t(tt,null,{default:l(()=>[t(w,{value:"download"},{prepend:l(()=>[t(d,{size:"24",class:"me-3",icon:"tabler-download"})]),default:l(()=>[t(y,null,{default:l(()=>[m("Download")]),_:1})]),_:1}),t(w,{to:{name:"apps-invoice-edit-id",params:{id:a.id}}},{prepend:l(()=>[t(d,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:l(()=>[t(y,null,{default:l(()=>[m("Edit")]),_:1})]),_:2},1032,["to"]),t(w,{value:"duplicate"},{prepend:l(()=>[t(d,{size:"24",class:"me-3",icon:"tabler-stack"})]),default:l(()=>[t(y,null,{default:l(()=>[m("Duplicate")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),Q(e("tfoot",null,Ct,512),[[G,!r(p).length]])]),_:1}),t(N),t(C,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:l(()=>[e("span",Tt,n(r(E)),1),t(L),t(et,{modelValue:r(i),"onUpdate:modelValue":s[3]||(s[3]=a=>x(i)?i.value=a:null),size:"small","total-visible":5,length:r(h),onNext:s[4]||(s[4]=a=>S.value=[]),onPrev:s[5]||(s[5]=a=>S.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1})):M("",!0)}}};export{_e as default};
